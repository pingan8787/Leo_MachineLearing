## Python学习（三）函数方法等
### 一、学习网站
>廖雪峰 Python入门 慕课网：[点击打开](http://www.imooc.com/learn/177)

### 二、基础知识
#### 1、函数
>[官方文档](http://docs.python.org/2/library/functions.html)
参数数量不对直接报错：
```
abs(1)      # 正确
abs(1,2)    # 错误 因为abs有且仅有1个参数
int('123')  # 123
str(123)    # '123'
cmp(1,2)    # -1   如果x<y则返回-1,如果x=y则返回0,如果x>y则返回1
```

##### a、编写函数：
定义一个函数，需要使用`def语句` 然后一次写函数名、括号、括号中的参数和冒号，然后缩进块中写函数体，函数的返回用`return`语句。如：
```
def my_abs(x):
    if x >= 0:
        return x
    else:
        return -x
def square_of_sum(L):
    H = 0
    for id in L:
        H += id*id
    return H
print square_of_sum([1, 2, 3, 4, 5])
print square_of_sum([-5, 0, 5, 15, 25])
```
##### b、返回多值
Python的函数返回多值其实就是返回一个 `tuple` , 但写起来更方便。
```
import math        # math 包提供了sin()和cos()函数
def move(x,y,step,anlge):
    nx = x + step*math.cos(angle)
    ny = y - step*math.sin(angle)
    return nx,ny
x,y = (100,100,60,math.pi/6)
print x,y                   # 151.961524227  70.0
r = (100,100,60,math.pi/6)  # 其实这是假象，python返回的任然是单一值
print r                     # (151.961524227, 70.0)  看得出结果是个tuple
```
用`print`打印返回结果，原来返回值是一个 `tuple` ！
但是，在语法上，返回一个`tuple`可以省略括号，而多个变量可以同时接收一个`tuple`，按位置赋给对应的值，所以，Python的函数返回多值其实就是返回一个`tuple`，但写起来更方便。   
计算：
```
#求 一元二次方程的定义是：ax² + bx + c = 0 的两个解：
import math
def quadratic_equation(a, b, c):
    if b**2-4*a*c >= 0:    # b**2-4*a*c 小于0就会无解
        he = b**2-4*a*c
        x = (-b+math.sqrt(he))/(2*a)
        y = (-b-math.sqrt(he))/(2*a)
    else:
        x = 0
        y = 0
    return x,y

print quadratic_equation(2, 0, 0)
print quadratic_equation(1, -6, 5)
```
##### c、递归函数
在函数内部，可以调用其他函数。如果一个函数在内部调用自身本身，这个函数就是`递归函数`。   
如计算阶乘 n! = 1 * 2 * 3 * ... * n：
```
fact(n) = n! = 1 * 2 * 3 * ... * (n-1) * n = (n-1)! * n = fact(n-1) * n
```
所以，`fact(n)`可以表示为 `n * fact(n-1)`，只有`n=1`时需要特殊处理。  
于是，`fact(n)`用递归的方式写出来就是：  
```
def fact(n):
    if n==1:
        return 1
    return n * fact(n - 1)
fact(5)     # 120
```
计算过程如下：
```
===> fact(5)
===> 5 * fact(4)
===> 5 * (4 * fact(3))
===> 5 * (4 * (3 * fact(2)))
===> 5 * (4 * (3 * (2 * fact(1))))
===> 5 * (4 * (3 * (2 * 1)))
===> 5 * (4 * (3 * 2))
===> 5 * (4 * 6)
===> 5 * 24
===> 120
```
递归函数的优点是`定义简单`，`逻辑清晰`。理论上，所有的递归函数都可以写成`循环`的方式，但循环的逻辑不如递归清晰。     
`使用递归函数需要注意防止栈溢出`。在计算机中，函数调用是通过栈（stack）这种数据结构实现的，每当进入一个函数调用，栈就会加一层栈帧，每当函数返回，栈就会减一层栈帧。  
由于栈的大小不是无限的，所以，递归调用的次数过多，会导致栈溢出。可以试试计算 fact(10000)。
汉诺塔案例：  
[汉诺塔](http://baike.baidu.com/view/191666.htm)的移动也可以看做是递归函数。  
```
我们对柱子编号为a, b, c，将所有圆盘从a移到c可以描述为：  
如果a只有一个圆盘，可以直接移动到c；   
如果a有N个圆盘，可以看成a有1个圆盘（底盘） + (N-1)个圆盘，首先需要把 (N-1) 个圆盘移动到 b，  
然后将a的最后一个圆盘移动到c，再将b的(N-1)个圆盘移动到c。
```
代码实现：
```
# move(n, a, b, c)表示的是有n个盘子在a柱子上，将要移到b柱子上面去
def move(n, a, b, c):
# 如果a柱子上面只有一个盘子，则直接移到c柱子上面去并输出路径，结束递归
if n == 1:  
    print a, '-->', c
    return
    # 表示的是将n-1的盘子从a柱子上面移到b柱子上面去
    move(n-1, a, c, b)
    # 输出最下面个盘子移从a移到c的路径
    print a, '-->', c
    # 将b柱子上面的n-1个盘子移动到c柱子上面
    move(n-1, b, a, c)
# 执行
move(4, 'A', 'B', 'C')
```
##### d、默认参数
函数的默认参数的作用是`简化调用`，当少传或没传参数的时候，函数会以默认参数进行调用。  
例如，定义一个计算`x的N次方`的函数：  
```
def power(x,n = 2):   # 默认设置 n = 2
    s = 1
    whild n > 0:
        n = n - 1
        s = s * x
    return s
print power(5)        # 25
```
>注意：默认参数只能定义在必需参数的后面
```
# OK:
def fn1(a, b=1, c=2):
    pass
# Error:
def fn2(a=1, b):
    pass
```
案例:
```
def greet(name='world'):
        print 'Hello,',name

greet()              # Hello,world
greet('Bart')        #  Hello,Bart
```
##### e、可变参数
如果想让一个函数能接受`任意个参数`，我们就可以定义一个可变参数。  
可变参数的名字前面有个 `*` 号，我们可以传入0个、1个或多个参数给可变参数。  
```
def fn(*args):
    print args
fn()              # ()
fn('a')           # ('a',)
fn('a','b')       # ('a','b')
```
python解释器会把传入的一组参数组装成一个`tuple`传递给可变参数，因此，在函数内部，直接把变量`args`看成一个`tuple`就好。  
定义可变参数的目的也是为了`简化调用`。  
求平均数案例：
```
def average(*args):
    if len(args)!=0:
        return sum(args)*1.0/len(args)
    else :
        return 0.0
print average()
print average(1, 2)
print average(1, 2, 2, 3, 4)
```

#### 2、对list进行切片
对list制定索引范围进行取值，即使用切片。  
如：  
a、`L[0:3]` 表示索引从0开始，知道索引`3`结束， 不包括`3`，也可以`L[1:3]`；  
b、`L[:3]`并且如果第一个索引如果是`0`，可以省略 ;  
     `L[:2]`从`头`到`2`，不包括`2`，`L[2:]`从`2`到`尾`，包括`2`；  
c、`L[:]`表示`从头到尾`  
d、`L[::2]`表示每间隔2个取一个，也就是`隔一取一 `   
```
L = ['A','B','C','D','E'];  
L[0:3]    # 取索引0-3之前的值  返回['A','B','C','D']
L[:3]     # 取索引0-3之前的值  返回['A','B','C','D'] 默认0开始的可以省略0
```
倒序切片：  
记住`倒数第一个`元素的索引是`-1`，倒序切片包含起始索引，不包含结束索引。  
```
L = ['A','B','C','D','E'];
L[-2:]           # ['D','E']
L[:-2]           # ['A','B']
L[-3:-1]         # ['C','D']
L[-4:-1:2]       # ['A','C','E']
```
案例：  
利用倒序切片对 `1 - 100` 的数列取出： 最后10个数； 最后10个5的倍数。  
```
L = range(1, 101)
print L[-10:]            #  [91, 92, 93, 94, 95, 96, 97, 98, 99, 100]
print L[4::5][-10:]      #  [55, 60, 65, 70, 75, 80, 85, 90, 95, 100]
```
#### 3、对tuple进行切片
与对`list`切片完全一致，只是结果是`tuple`.  
案例： 
从`0-100`之间，取出`前10`个数；3的倍数；不大于50的5的倍数。  
```
L = range(1, 101)
print L[0:10]    # [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]
print L[2::3]    # [3, 6, 9, 12, 15,..., 99]
print L[4:50:5]  # [5, 10, 15, 20,..., 45, 50]
```
#### 4、对字符串进行切片
字符串 `'xxx'`和 `Unicode字符串` u'xxx'也可以看成是一种`list`，每个元素就是一个字符。  
因此，字符串也可以用切片操作，只是操作结果仍是字符串：  
```
'ABCDEFG'[:3]             #  'ABC'
'ABCDEFG'[-3:]            #  'EFG'
'ABCDEFG'[::2]            #  'ACEG'
```
Python没有针对字符串的截取函数，只需要切片一个操作就可以完成，非常简单。  
案例：  
设计一个函数，它接受一个字符串，然后返回一个仅首字母变成大写的字符串。  
```
def firstCharUpper(s):                
    return s[:1].upper()+s[1:]        #  upper() 方法可以把字符变成大写字母

print firstCharUpper('hello')         #  Hello
print firstCharUpper('sunday')        #  Sunday
print firstCharUpper('september')     #  September
```

